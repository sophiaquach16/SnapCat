import React, { Component } from 'react'
import {GoogleSignin, GoogleSigninButton} from 'react-native-google-signin';

export default class LoginGoogle extends Component {
  componentDidMount() {
    GoogleSignin.configure({
        offlineAccess: true // if you want to access Google API on behalf of the user FROM YOUR SERVER
    });
    this.setupGoogleSignin();
  }

  googleAuth() {
    GoogleSignin.signIn()
      .then((user) => {
        console.log(user);
      })
      .catch((err) => {
        console.log('WRONG SIGNIN', err);
      })
      .done();
  }

  async setupGoogleSignin() {
    try {
      await GoogleSignin.hasPlayServices({ autoResolve: true });
      await GoogleSignin.configure({
        iosClientId: settings.iOSClientId,
        webClientId: settings.webClientId,
        offlineAccess: false
      });

      const user = await GoogleSignin.currentUserAsync();
      console.log(user);
    }
    catch (err) {
      console.log("Google signin error", err.code, err.message);
    }
  }
  render() {
    return (
          <GoogleSigninButton
            style={{width: 48, height: 48}}
            size={GoogleSigninButton.Size.Icon}
            color={GoogleSigninButton.Color.Dark}
            onPress={this.googleAuth.bind(this)}/>
     )
  }
}